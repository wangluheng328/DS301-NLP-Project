In 1991, an 11-year-old girl named Alyssa "Ally" Craig is with her mother on the New York City Subway platform, on the F Line at 18th Avenue and McDonald Avenue elevated station in Brooklyn.
Suddenly, she witnesses her mother being murdered by muggers.
She is scarred from the events, never going to the subway again.

Ten years after her mother's death, a 21-year-old Ally (Emilie De Ravin) is a student at NYU.
She lives at home with her overprotective father, Neil (Chris Cooper), who works as a NYPD detective, who is worried that she is becoming independent from him and that she will run in danger.

Tyler Hawkins (Robert Pattinson) is a moody, directionless, yet good-moraled 21-year-old, who is auditing classes at the NYU and working in the university bookstore.
He has had a strained relationship with his businessman father, Charles (Pierce Brosnan) since his brother Michael's suicide (after which Tyler got Michael's name tattooed on his chest).
Tyler speaks to Michael through writing in his diary, Charles appears to ignore his youngest child, Caroline (Ruby Jerins), of whom Tyler is very protective and walks her everyday to school.
His closest friend is his roommate Aidan (Tate Ellington).

One night, Tyler and Aidan are hanging out at the small alley and find themselves in trouble with Neil, who arrests Tyler.
Charles bails out Tyler.
Later, Aidan sees Neil dropping Ally off at NYU, realizing that she is his daughter.
He decides to retaliate against the detective by persuading Tyler to sleep with and ultimately dump Ally.
Tyler reluctantly agrees to meet her.
After spending some time together, Ally and Tyler bond over the losses in their lives and begin to fall in love.
After Ally sleeps over at Tyler's house, she and her father have a fight over it, ending with Neil hitting her in the face.
Ally, disgusted with this, moves in permanently with Tyler and Aidan.
Meanwhile, Caroline, who is a budding artist, is featured in an art show.
Tyler tries to convince his father to attend the show, but he is forced away on business.
Tyler angrily confronts him after the show, which drives a further wedge between the two.

Later, Neil's partner recognizes Tyler with Ally on a train coming from a beach holiday with his family.
Neil breaks into Tyler's apartment and confronts Tyler.
Tyler provokes Neil by confessing to Aidan's plan and his initial reason for meeting Ally, which in turn forces Tyler to confess everything to Ally.
She leaves him angrily and returns to her father's home.
Also, Caroline is bullied by a group of classmates at a birthday party; they cut her hair off, and when they tease her in front of Tyler, he turns violent and ends up in jail again.
Charles is impressed that Tyler stood up for his sister, and they begin to reconnect.

Tyler and Ally remain alienated and away from each other until Aidan visits her to explain that only he is to blame, and that Tyler was sincerely in love with her.
They are then shown to be back together, as they walk with Caroline in the park.
Later, Charles asks Tyler to meet with him and his lawyers at his office.
Charles takes Caroline to school and is late, so Tyler waits in his office, where he sees, on Charles's computer, a screensaver of pictures of Tyler, Michael, and Caroline when they were younger, indeed showing that although he is always away, he cares for them.

After Charles drops Caroline to school, she sits in her classroom, where the teacher writes the date on the blackboard as September 11, 2001.
Tyler looks out at Manhattan from the window of his father's officeâ€” which is located in the North Tower of the World Trade Center.
Once the 9/11 terrorist attacks begin, the rest of the family (along with Aidan and Ally) are seen looking horrified at the towers before the camera pans over the rubble, showing Tyler's diary.
In a voice-over of his diary, Tyler reveals to Michael that he loves him, and he forgives him for killing himself.
Tyler is later buried next to Michael.

Some time later, Caroline (whose hair has grown back) and Charles seem to have a healthy father-daughter relationship.
Aidan, who has since gotten a tattoo of Tyler's name on his arm, is working hard in school and Ally is finally taking the subway again, after having avoided it since her mother's death.
The film ends as she looks at the camera with a small, sad smile.